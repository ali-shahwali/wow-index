@page "/Register"
@inject IJSRuntime _jsRuntime

<MudButton OnClick="@(e => Authorize())">Authorize</MudButton>

@code {


    public HttpClient apiConnection(string uri)
    {
        var APIclient = new HttpClient();
        APIclient.BaseAddress = new Uri(uri);

        return APIclient;
    }

    protected async override Task OnInitializedAsync()
    {

        // https://localhost:44374
        //await _jsRuntime.InvokeVoidAsync("blazorOpen", new object[2] { auth.RequestMessage.RequestUri.OriginalString, "_blank" });
        //var token = await apiConnection("https://eu.battle.net/oauth/token").PostAsync("?grant_type=authorization_code&code={code}&redirect_uri=https://localhost:44374&client_id=1982e5a534d049c2be0c44fa9a4c3171", auth.Content);
        //string t = await token.Content.ReadAsStringAsync();
    }

    private async Task Authorize()
    {
        var auth = await apiConnection("https://eu.battle.net/oauth/authorize").GetAsync("?response_type=code&client_id=1982e5a534d049c2be0c44fa9a4c3171&redirect_uri=https%3A%2F%2Flocalhost%3A44374%2FRegister&scope=wow.profile");
        NavigationManager.NavigateTo(auth.RequestMessage.RequestUri.OriginalString);
    }
}
